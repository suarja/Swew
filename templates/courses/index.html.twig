{% extends 'base.html.twig' %}

{% block title %}Courses · SWE Wannabe{% endblock %}

{% block body %}
    <div class="page-stack">
        <section class="card hero-card">
            <p class="card-eyebrow">courses</p>
            <h1 class="card-title">Pick the next lab from the live catalog.</h1>
            <p class="card-text">
                Lessons, assignments, and CLI rituals now pull straight from Postgres via the EasyAdmin forms.
                Each course below links into the same specs your terminal will download, so the story never drifts from web to CLI.
            </p>
            <div style="display:flex;flex-wrap:wrap;gap:0.75rem;margin-top:1.5rem;">
                <a class="pill-link primary" href="/docs">Open docs</a>
                <a class="pill-link" href="/cli">Review CLI rituals</a>
            </div>
        </section>

        <section class="card">
            <p class="card-eyebrow">catalog</p>
            {% if courses|length > 0 %}
                <div class="catalog-stack">
                    {% for course in courses %}
                        <article id="{{ course.slug }}" class="catalog-card">
                            <div class="catalog-card__header">
                                <div class="catalog-card__intro">
                                    <h2 class="catalog-card__title">{{ course.title }}</h2>
                                    <p class="catalog-card__summary">{{ course.summary ?? 'Summary coming soon.' }}</p>
                                </div>
                                <div class="catalog-card__chips">
                                    <span class="catalog-chip">{{ course.status|upper }}</span>
                                    <span class="catalog-chip">{{ course.lessonCount }} lessons</span>
                                </div>
                            </div>
                            <div class="catalog-card__lessons">
                                <p class="card-eyebrow">lessons</p>
                                <ol class="lesson-list">
                                    {% for lesson in course.lessons %}
                                        <li class="lesson-list__item">
                                            <div class="lesson-list__meta">
                                                <a class="lesson-list__link" href="{{ path('app_lessons_show', { slug: lesson.slug }) }}">
                                                    {{ '%02d'|format(lesson.sequence) }} · {{ lesson.title }}
                                                </a>
                                                <span class="lesson-list__slug">{{ lesson.slug }}</span>
                                            </div>
                                            <p class="lesson-list__summary">{{ lesson.summary ?? 'Lesson content coming soon.' }}</p>
                                        </li>
                                    {% else %}
                                        <li class="lesson-list__item lesson-list__item--empty">No lessons yet.</li>
                                    {% endfor %}
                                </ol>
                            </div>
                        </article>
                    {% endfor %}
                </div>
            {% else %}
                <p class="card-text">No live courses yet. Seed the catalog in <code>/admin</code> to surface content here.</p>
            {% endif %}
        </section>
    </div>
{% endblock %}
